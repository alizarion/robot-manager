/*!
 * Copyright 2015 itesoft.
 * http://itesoft.com/
 *
 * showcase-quickstart, v0.0.1
 * A powerful music manager.*/
!function(){function e(e,a,t){this.rotation=t;var n=this,r=e;a.editable&&r.addEventListener("mousewheel",function(e,t){var i=r.getElementsByClassName("rotation")[0];e.deltaY<0&&n.rotation<=170&&(n.rotation+=10),e.deltaY>0&&n.rotation>=10&&(n.rotation-=10);var o=100*n.rotation/180;i.style.height=o+"%",a.handModel.thumb=a.thumb.rotation,a.handModel.index=a.index.rotation,a.handModel.major=a.major.rotation,a.handModel.ringfinger=a.ringfinger.rotation,a.handModel.auricular=a.auricular.rotation,a.$apply(),e.preventDefault()},!1)}angular.module("robot.manager",["itesoft","localStorage.services","ngRoute","ui.hand","ngSanitize","pascalprecht.translate","ui.bootstrap.dropdown"]).config(["$translateProvider","$translatePartialLoaderProvider",function(e,a){e.registerAvailableLanguageKeys(["en","fr","de"],{en_US:"en",en_GB:"en",fr_FR:"fr","fr-CA":"fr","de-DE":"de"}).determinePreferredLanguage(),e.useLoader("$translatePartialLoader",{urlTemplate:"assets/locale/{lang}/{part}-{lang}.json"}),e.useSanitizeValueStrategy()}]).config(["ITLocalStorageProvider",function(e){e.defaultKey="ROBOT_MANAGER"}]).run(["$rootScope","$route",function(e,a){e.$on("$routeChangeSuccess",function(){e.pageTitle=a.current.title})}]),angular.module("robot.manager").config(["$routeProvider",function(e){e.when("/api/config",{templateUrl:"app/features/api/config/configView.html",controller:"ApiConfigCtrl",title:"API Configuration"}).when("/robot/hand",{templateUrl:"app/features/robot/hand/handView.html",controller:"HandCtrl",title:"Hand Controller"}).otherwise({redirectTo:"/api/config"})}]),angular.module("ui.hand",[]).directive("robotHand",[function(){return{restrict:"EA",scope:{editable:"=",handModel:"=",scale:"="},template:'<div  style="height: {{500 * scale}}px;" class="hand"> <div style="height: {{210 * scale}}px; margin-top: {{300 * scale}}px; width: {{180 * scale}}px; border-radius: {{20 * scale}}px;" class="pome"></div> <div style="margin-top:{{90* scale}}px; height : {{210* scale}}px; margin-left:{{5 * scale}}px; margin-right: {{ 5 * scale}}px; border-radius :{{20 * scale}}px; width : {{35 * scale}}px;" class="finger auricular"> <p style="font-size: {{15 *scale}}px; padding-top: {{50 * scale}}px; width: {{35 * scale}}px;" class="info">{{auricular.rotation}}</p> <div id="rotation" class="rotation" style="height: {{(auricular.rotation * 100) / 180}}%"></div> </div> <div style="margin-top:{{40* scale}}px; height : {{260* scale}}px; margin-left:{{5 * scale}}px; margin-right: {{ 5 * scale}}px; border-radius :{{20 * scale}}px; width : {{35 * scale}}px;"  class="finger ringfinger"> <p style="font-size: {{15 *scale}}px;padding-top: {{50 * scale}}px; width: {{35 * scale}}px;" class="info">{{ringfinger.rotation}}</p> <div id="ringfingerRotate" class="rotation" style="height: {{(ringfinger.rotation * 100) / 180}}%"></div> </div> <div style="margin-top:{{0* scale}}px; height : {{300* scale}}px; margin-left:{{5 * scale}}px; margin-right: {{ 5 * scale}}px; border-radius :{{20 * scale}}px; width : {{35 * scale}}px;" class="finger major "> <p  style="font-size: {{15 *scale}}px;padding-top: {{50 * scale}}px; width: {{35 * scale}}px;" class="info">{{major.rotation}}</p> <div id="majorfingerRotate" class="rotation" style="height: {{(major.rotation * 100) / 180}}%"></div> </div> <div style="margin-top:{{20* scale}}px; height : {{280* scale}}px; margin-left:{{5 * scale}}px; margin-right: {{ 5 * scale}}px; border-radius :{{20 * scale}}px; width : {{35 * scale}}px;"  class="finger index"> <p style="font-size: {{15 *scale}}px;padding-top: {{50 * scale}}px; width: {{35 * scale}}px;" class="info">{{index.rotation}}</p> <div id="indexfingerRotate" class="rotation" style="height: {{(index.rotation * 100) / 180}}%"></div> </div> <div style="margin-top:{{250 * scale}}px; height : {{150* scale}}px;margin-left:{{5 * scale}}px; margin-right: {{ 5 * scale}}px; border-radius :{{20 * scale}}px; width : {{35 * scale}}px;"  class="finger thumb"> <p style="font-size: {{15 *scale}}px;padding-top: {{50 * scale}}px; width: {{35 * scale}}px;" class="info">{{thumb.rotation}}</p> <div id="thumbRotate" class="rotation" style="height: {{(thumb.rotation * 100) / 180}}%"></div> </div> </div>',compile:function(a,t){return{pre:function(a,t,n,r,i){a.major=new e(t[0].getElementsByClassName("major")[0],a,a.handModel.major),a.index=new e(t[0].getElementsByClassName("index")[0],a,a.handModel.index),a.auricular=new e(t[0].getElementsByClassName("auricular")[0],a,a.handModel.auricular),a.thumb=new e(t[0].getElementsByClassName("thumb")[0],a,a.handModel.thumb),a.ringfinger=new e(t[0].getElementsByClassName("ringfinger")[0],a,a.handModel.ringfinger)},post:function(e,a,t,n,r){}}},controller:["$scope",function(e){e.handID=e.$id}]}}]),angular.module("robot.manager").service("ApplicationService",["ITLocalStorage","Application",function(e,a){function t(){var t=e.load();return t?t:new a}return{load:t,save:e.save}}]),angular.module("robot.manager").factory("Application",[function(){function e(){this.API={URL:""},this.playlist=[]}return function(){return new e}}]),angular.module("localStorage.services",[]).provider("ITLocalStorage",[function(){this.defaultKey="IT_KEY";var e=this;this.$get=function(){function a(a){a&&localStorage.setItem(e.defaultKey,angular.toJson(a))}function t(){var a=localStorage.getItem(e.defaultKey);return a?angular.fromJson(a):a}return{save:a,load:t}}}]),angular.module("robot.manager").service("RobotPlayerService",["$http","ApplicationService",function(e,a){function t(t){return e({method:"GET",url:a.load().API.URL+"/fingers",params:t})}return{playHand:t}}]),angular.module("robot.manager").service("TranslationService",["$q","$translate","$translatePartialLoader",function(e,a,t){return function(){return t.addPart("global"),angular.forEach(arguments,function(e){t.addPart(e)}),a.refresh()}}]),angular.module("robot.manager").controller("ApiConfigCtrl",["$scope","ITLocalStorage","ApplicationService",function(e,a,t){e.application=t.load(),e.applicationService=t}]),angular.module("robot.manager").controller("HandCtrl",["ApplicationService","Step","$scope","RobotPlayerService",function(e,a,t,n){t.currentStep=new a,t.$watch("currentStep.hand",function(){n.playHand(t.currentStep.hand)},!0)}]),angular.module("robot.manager").factory("Hand",[function(){function e(e){this.thumb=e?e.thumb:180,this.ringfinger=e?e.ringfinger:180,this.auricular=e?e.auricular:180,this.index=e?e.index:180,this.major=e?e.major:180}return function(a){return new e(a)}}]),angular.module("robot.manager").factory("Step",["Hand",function(e){function a(a){this.stepIndex=a?a.stepIndex+1:0,this.hand=a?angular.copy(a.hand,this.hand):new e}return function(e){return new a(e)}}])}();